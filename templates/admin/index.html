{% extends "admin/base_site.html" %}
{% load i18n static admin_urls %}

{% block extrahead %}{{ block.super }}
<script defer src="{% static 'admin/js/nav-sidebar.js' %}"></script>
<style>
    .welcome-section {
        background: linear-gradient(135deg, #1a365d 0%, #2c5282 50%, #3182ce 100%);
        color: white;
        padding: 30px;
        border-radius: 15px;
        margin-bottom: 30px;
        box-shadow: 0 8px 25px rgba(49, 130, 206, 0.3);
    }

    .welcome-section h1 {
        font-size: 28px;
        font-weight: 700;
        margin-bottom: 15px;
        display: flex;
        align-items: center;
    }

    .welcome-section h1::before {
        content: "ðŸŽ“";
        margin-right: 15px;
        font-size: 32px;
    }

    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
    }

    .stat-card {
        background: white;
        padding: 25px;
        border-radius: 15px;
        text-align: center;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        border-left: 5px solid #3182ce;
        transition: transform 0.3s ease;
    }

    .stat-card:hover {
        transform: translateY(-5px);
    }

    .stat-card .number {
        font-size: 36px;
        font-weight: 700;
        color: #3182ce;
        margin-bottom: 10px;
    }

    .stat-card .label {
        font-size: 14px;
        color: #6c757d;
        text-transform: uppercase;
        letter-spacing: 1px;
        font-weight: 600;
    }

    .recent-activity-section {
        background: white;
        border-radius: 15px;
        padding: 25px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        margin-bottom: 30px;
    }

    .recent-activity-section h2 {
        color: #2c3e50;
        font-size: 20px;
        font-weight: 600;
        margin-bottom: 20px;
        display: flex;
        align-items: center;
    }

    .recent-activity-section h2::before {
        content: "âš¡";
        margin-right: 10px;
        font-size: 24px;
    }

    .recent-activity {
        max-height: 400px;
        overflow-y: auto;
    }

    .recent-activity table {
        width: 100%;
        border-collapse: collapse;
    }

    .recent-activity th {
        background: #f8f9fa;
        padding: 12px 15px;
        text-align: left;
        font-weight: 600;
        color: #495057;
        border-bottom: 2px solid #dee2e6;
    }

    .recent-activity td {
        padding: 12px 15px;
        border-bottom: 1px solid #f1f3f5;
        color: #374151 !important;
        font-weight: 500;
    }

    .recent-activity td a {
        color: #3182ce !important;
        text-decoration: none;
        font-weight: 600;
    }

    .recent-activity td a:hover {
        color: #2c5282 !important;
        text-decoration: underline;
    }

    .recent-activity tr:hover {
        background: #f8f9fa;
    }

    /* Dark mode styles */
    body.dark-theme .welcome-section {
        background: linear-gradient(135deg, #1f2937 0%, #374151 50%, #4b5563 100%);
    }

    body.dark-theme .stat-card {
        background: #374151;
        color: #e5e7eb;
    }

    body.dark-theme .stat-card .number {
        color: #60a5fa;
    }

    body.dark-theme .stat-card .label {
        color: #9ca3af;
    }

    body.dark-theme .recent-activity-section {
        background: #374151;
        color: #e5e7eb;
    }

    body.dark-theme .recent-activity-section h2 {
        color: #f3f4f6;
    }

    body.dark-theme .recent-activity th {
        background: #4b5563;
        color: #e5e7eb;
        border-bottom-color: #6b7280;
    }

    body.dark-theme .recent-activity td {
        color: #e5e7eb !important;
        border-bottom-color: #4b5563;
    }

    body.dark-theme .recent-activity td a {
        color: #60a5fa !important;
    }

    body.dark-theme .recent-activity tr:hover {
        background: #4b5563;
    }
</style>
{% endblock %}

{% block bodyclass %}{{ block.super }} dashboard{% endblock %}

{% block nav-breadcrumbs %}{% endblock %}

{% block nav-sidebar %}
    {% include "admin/nav_sidebar.html" %}
{% endblock %}

{% block content %}
<div id="content-main">
    <div class="welcome-section">
        <h1>Welcome to LUM Data Academy Admin</h1>
        <p>Manage your courses, students, and academy operations from this comprehensive dashboard.</p>
    </div>

    <div class="stats-grid">
        <div class="stat-card">
            <div class="number">{{ user_count|default:0 }}</div>
            <div class="label">Total Users</div>
        </div>
        <div class="stat-card">
            <div class="number">{{ course_count|default:0 }}</div>
            <div class="label">Active Courses</div>
        </div>
        <div class="stat-card">
            <div class="number">{{ enrollment_count|default:0 }}</div>
            <div class="label">Enrollments</div>
        </div>
        <div class="stat-card">
            <div class="number">{{ blog_count|default:0 }}</div>
            <div class="label">Blog Posts</div>
        </div>
    </div>

    <div class="recent-activity-section">
        <h2>Recent Activity</h2>
        <div class="recent-activity">
            <table>
                <thead>
                    <tr>
                        <th>Action</th>
                        <th>User</th>
                        <th>Object</th>
                        <th>Time</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Added</td>
                        <td><a href="#">admin</a></td>
                        <td><a href="#">Python Fundamentals Course</a></td>
                        <td>2 hours ago</td>
                    </tr>
                    <tr>
                        <td>Modified</td>
                        <td><a href="#">instructor1</a></td>
                        <td><a href="#">Data Science Module 3</a></td>
                        <td>4 hours ago</td>
                    </tr>
                    <tr>
                        <td>Added</td>
                        <td><a href="#">admin</a></td>
                        <td><a href="#">New Blog Post: Machine Learning Trends</a></td>
                        <td>6 hours ago</td>
                    </tr>
                    <tr>
                        <td>Enrolled</td>
                        <td><a href="#">student123</a></td>
                        <td><a href="#">Web Development Bootcamp</a></td>
                        <td>8 hours ago</td>
                    </tr>
                    <tr>
                        <td>Modified</td>
                        <td><a href="#">admin</a></td>
                        <td><a href="#">Course Category: Data Science</a></td>
                        <td>1 day ago</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    {% include "admin/app_list.html" with app_list=app_list only %}
</div>
{% endblock %}