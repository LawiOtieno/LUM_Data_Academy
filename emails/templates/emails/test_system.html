
{% extends 'admin/base_site.html' %}
{% load static %}

{% block title %}Email System Test - {{ block.super }}{% endblock %}

{% block extrahead %}
{{ block.super }}
<style>
    .email-test-container {
        max-width: 800px;
        margin: 20px auto;
        padding: 20px;
    }
    .config-section {
        background: #f8f9fa;
        padding: 15px;
        margin: 20px 0;
        border-radius: 5px;
        border-left: 4px solid #007cba;
    }
    .test-form {
        background: white;
        padding: 20px;
        border-radius: 5px;
        border: 1px solid #ddd;
        margin: 20px 0;
    }
    .form-group {
        margin-bottom: 15px;
    }
    .form-group label {
        display: block;
        margin-bottom: 5px;
        font-weight: bold;
    }
    .form-group input, .form-group select {
        width: 100%;
        padding: 8px;
        border: 1px solid #ddd;
        border-radius: 4px;
    }
    .btn-test {
        background: #007cba;
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
    }
    .btn-test:hover {
        background: #005a87;
    }
    .status-ok {
        color: #28a745;
        font-weight: bold;
    }
    .status-error {
        color: #dc3545;
        font-weight: bold;
    }
</style>
{% endblock %}

{% block content %}
<div class="email-test-container">
    <h1>üìß Email System Test</h1>
    
    {% if messages %}
        {% for message in messages %}
            <div class="alert alert-{{ message.tags }} alert-dismissible">
                {{ message }}
            </div>
        {% endfor %}
    {% endif %}
    
    <div class="config-section">
        <h2>üìã Email Configuration</h2>
        <ul>
            {% for key, value in email_config.items %}
                <li>
                    <strong>{{ key }}:</strong> 
                    {% if value == 'Not configured' %}
                        <span class="status-error">{{ value }}</span>
                    {% else %}
                        <span class="status-ok">{{ value }}</span>
                    {% endif %}
                </li>
            {% endfor %}
        </ul>
    </div>
    
    <div class="test-form">
        <h2>üß™ Test Email Sending</h2>
        <form method="post">
            {% csrf_token %}
            
            <div class="form-group">
                <label for="email_type">Email Type:</label>
                <select name="email_type" id="email_type" required>
                    <option value="">Select email type...</option>
                    <option value="welcome">Welcome Email</option>
                    <option value="contact_response">Contact Form Response</option>
                    <option value="newsletter">Newsletter Confirmation</option>
                    <option value="admin_notification">Admin Notification</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="test_email">Test Email Address:</label>
                <input type="email" name="test_email" id="test_email" 
                       value="{{ user.email }}" placeholder="test@example.com" required>
            </div>
            
            <button type="submit" class="btn-test">üöÄ Send Test Email</button>
        </form>
    </div>
    
    <div class="config-section">
        <h2>üìù Email Templates Available</h2>
        <ul>
            <li>‚úÖ Verification Email (verification.html/txt)</li>
            <li>‚úÖ Password Reset (password_reset.html/txt)</li>
            <li>‚úÖ Welcome Email (welcome.html/txt)</li>
            <li>‚úÖ Course Enrollment (course_enrollment.html)</li>
            <li>‚úÖ Enrollment Confirmation (enrollment_confirmation.html)</li>
            <li>‚úÖ Course Access (course_access.html)</li>
            <li>‚úÖ Contact Response (contact_response.html)</li>
            <li>‚úÖ Newsletter Confirmation (newsletter_confirmation.html)</li>
            <li>‚úÖ Admin Notification (admin_notification.html)</li>
        </ul>
    </div>
</div>
{% endblock %}
